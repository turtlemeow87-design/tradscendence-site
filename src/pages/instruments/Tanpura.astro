---
// src/pages/instruments/Tanpura.astro
import BaseLayout from "../../layouts/BaseLayout.astro";

// ✅ SEO
const title = "Tanpura — Tradscendence | Meditative Indian drone instrument";
const description =
  "Hear the Tanpura’s entrancing overtones: one performance tuned to C, with a second coming soon. Learn how this drone frames Hindustani music, worship, and meditation.";

// ✅ Canonical URL (important for indexing)
const canonical = "https://www.soundbeyondborders.com/instruments/Tanpura/";

// Tip: for iframes, add `ratio: "16 / 9"` (or "4 / 3", etc.)
const videos = [
  {
    id: "v1",
    label: "Key of C",
    type: "video",
    src: "/media/Tanpura1.mp4",
    poster: "",
  },
  {
    id: "v2",
    label: "Coming Soon",
    type: "video",
    src: "", // empty -> uses the built-in placeholder
    poster: "",
  },
];
---

<BaseLayout {title} description={description} canonical={canonical}>

  <section class="mx-auto max-w-6xl px-4 py-10 space-y-8">
    <header class="space-y-2">
      <h1 class="font-display text-3xl md:text-4xl">Tanpura</h1>
      <p class="opacity-80 max-w-3xl">
        A drone instrument whose resonance seems to transcend tangible frequency.
      </p>
    </header>

    <!-- Tabbed Hero Video -->
    <section class="rounded-2xl overflow-hidden frame border border-black/40 bg-black/20">
      <!-- Tabs -->
      <div
        class="tab-strip px-3 pt-3 sm:px-4 sm:pt-4"
        role="tablist"
        aria-label="Choose performance"
      >
        {videos.map((v, i) => (
          <button
            class="tab-button"
            data-tab={v.id}
            role="tab"
            aria-selected={i === 0 ? "true" : "false"}
            aria-controls={`pane-${v.id}`}
            id={`tab-${v.id}`}
          >
            {v.label}
          </button>
        ))}
      </div>

      <!-- Adaptive ratio shell (aspect-ratio driven by --ar) -->
      <div id="video-shell" class="relative w-full bg-black" style="aspect-ratio: var(--ar, 16 / 9);">
        {videos.map((v, i) => (
          <div
            id={`pane-${v.id}`}
            data-pane={v.id}
            role="tabpanel"
            aria-labelledby={`tab-${v.id}`}
            class={`video-pane ${i === 0 ? "is-active" : ""}`}
            data-ratio={v.ratio || ""}
          >
            {v.type === "video" && v.src ? (
              <video
                class="h-full w-full object-contain"
                controls
                playsinline
                preload="metadata"
                poster={v.poster || undefined}
              >
                <source src={v.src} />
              </video>
            ) : v.type === "iframe" && v.src ? (
              <iframe
                class="h-full w-full"
                src={v.src}
                title={v.label}
                loading="lazy"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen
              ></iframe>
            ) : (
              <div class="placeholder">
                <div class="placeholder-inner">
                  <span class="placeholder-title">Video coming soon</span>
                  <span class="placeholder-sub">
                    Upload your source in this file’s <code>videos[]</code> config.
                  </span>
                </div>
              </div>
            )}
          </div>
        ))}
      </div>
    </section>

    <!-- Story / description block -->
    <section class="prose-block">
      <h2 class="font-display text-2xl md:text-3xl">About this instrument</h2>
      <p class="opacity-80">
        The Tanpura is most often used as the backdrop of Hindustani classical music, though it also holds an important place in worship and meditation.
        It isn’t a melodic instrument in the traditional sense, yet its rich overtones can be deeply entrancing.
        At times, I feel as though I can hear voices—perhaps even divine ones—singing within the intricate layers of its drone.
        When you wish to fill silence with something simple yet profoundly mystical, the Tanpura is a beautiful choice.
      </p>
      <p class="opacity-80">
        In the first video, she is tuned to C. There is no second video yet, as this will require the process of retuning which is more involved than just turning pegs.
        Will update when I have done so!
      </p>
    </section>

    <!-- Keep Exploring link -->
    <div class="pt-8">
      <a
        href="/instruments"
        class="inline-flex items-center gap-2 font-display text-lg text-[var(--accent-gold)] hover:text-[var(--accent-rosewood)] transition-colors duration-200 group"
      >
        <span>Keep Exploring</span>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1.8"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="w-5 h-5 transform transition-transform duration-300 group-hover:translate-x-1"
        >
          <path d="M5 12h14"></path>
          <path d="M13 5l7 7-7 7"></path>
        </svg>
      </a>
    </div>
  </section>

  <style lang="css">
    /* (your original CSS remains unchanged) */
  </style>

  <script type="module">
    /* (your original JS remains unchanged) */
  </script>
</BaseLayout>
