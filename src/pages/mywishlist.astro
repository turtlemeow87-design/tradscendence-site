---
import BaseLayout from "../layouts/BaseLayout.astro";

// ‚úÖ Your Formspree endpoint
const FORMSPREE_ENDPOINT = "https://formspree.io/f/mblzzrqb";

// Edit this array to add/remove items.
const WISHLIST = [
  { id: "acoustic-bass-strings", name: "Acoustic Bass Strings", url: "https://www.amazon.com/DAddario-EPBB170-5-Phosphor-5-String-Acoustic/dp/B00373N0ZO/ref=asc_df_B00373N0ZO/?tag=hyprod-20&linkCode=df0&hvadid=693366139103&hvpos=&hvnetw=g&hvrand=4152059029923750231&hvpone=&hvptwo=&hvqmt=&hvdev=c&hvdvcmdl=&hvlocint=&hvlocphy=9008464&hvtargid=pla-525652260601&psc=1&mcid=f0b8557d4bb8301e8a66f3c4653a80a2" },
  { id: "12-string-acoustic-strings", name: "12-String Acoustic Guitar Strings", url: "https://www.amazon.com/DAddario-EJ16-3D-Phosphor-Acoustic-Strings/dp/B000EEL6IW/ref=sr_1_18?crid=VBI87E3QLY4U&dib=eyJ2IjoiMSJ9.kznjedVUYUS4uLQinOkxESV98n-SL6980c8PhKq5XUZzsbXCdVDSKdISaD88PmfkAsz1fiaru28UnITjybh5L0v2H0e5QYLIJtZVFUtFPJPbgyzZzS_5NHy7mYg7CpM1ZPQk6lNxJxpKUaSf3tuWaZkvI3vRWi8PT9pqZaYDeqlZFgBZK7kJpNBCRKNeGtYNP1z9tc19ugyz_StQlczMdl1prpqOUtyeC7IDzE9j3dIWAF4X-MbYZ_1h23tHZgTTvQ8Pmxsl4_fkmtfKhbKxqeo1frGwimh1QK6x3w-LUzM.R5erOzQu_UnGDPjkfLnEV11T_DeJmJXVRHbe4fHGkBw&dib_tag=se&keywords=12-string%2Bacoustic%2Bguitar%2Bmedium%2Bstrings&qid=1760065276&s=musical-instruments&sprefix=12-string%2Bacoustic%2Bguitar%2Bmedium%2Bstring%2Cmi%2C144&sr=1-18&th=1" },
  { id: "12-string-mandotar-strings", name: "12-string Mandotar Strings", url: "https://www.sweetwater.com/store/detail/FGX12EX--gold-tone-fgx12ex-12-string-mando-guitar-string-set-extra-light-008-042?mrkgadid=&mrkgcl=28&mrkgen=&mrkgbflag=&mrkgcat=&acctid=21700000001645388&dskeywordid=2309087508882&lid=92700080454169902&ds_s_kwgid=58700008743176697&ds_s_inventory_feed_id=97700000007215323&dsproductgroupid=2309087508882&product_id=FGX12EX&prodctry=US&prodlang=en&channel=online&storeid=&device=c&network=g&matchtype=&adpos=largenumber&locationid=9008464&creative=705256640098&targetid=pla-2309087508882&campaignid=21453452330&awsearchcpc=1&gclsrc=aw.ds&gad_source=1&gad_campaignid=21453452330&gbraid=0AAAAAD_RQYnyYX8aCgD5Yt72Ob6RrCTjx&gclid=CjwKCAjwup3HBhAAEiwA7euZuv9euSfojCRgNQBYI-8-DB7YSz6v0ap6zVOTW8OTAExhedazzAYRmhoCI7AQAvD_BwE" },
  { id: "octave-mandolin-strings", name: "Octave Mandolin Strings", url: "https://www.goldtonemusicgroup.com/goldtone/accessories/oms?srsltid=AfmBOoqyofGUuwbutcfHUjsmLVoMgwqAVDr1quZ_EcCUyqxOyhJiGVHA" },
  { id: "azeri-tar-strings", name: "Azeri Tar Strings", url: "https://salamuzik.com/products/azeri-tar-strings-sat-209?variant=39312060711097&country=US&currency=USD&utm_medium=product_sync&utm_source=google&utm_content=sag_organic&utm_campaign=sag_organic&utm_term=&utm_campaign=&utm_source=adwords&utm_medium=ppc&hsa_acc=4147239623&hsa_cam=18513796241&hsa_grp=&hsa_ad=&hsa_src=x&hsa_tgt=&hsa_kw=&hsa_mt=&hsa_net=adwords&hsa_ver=3&gad_source=1&gad_campaignid=18507717987&gbraid=0AAAAACxeuv6M2Wy7zqDmix63nF_z5hkRL&gclid=CjwKCAjwup3HBhAAEiwA7euZupI1L0cg5m6_ROU8QIZLNNhK8I8FcZodO-7slbby3YHb9mTkL4gt9RoCqtEQAvD_BwE" },
  { id: "turkish-oud-strings", name: "Turkish Oud Strings", url: "https://salamuzik.com/products/professional-strings-for-turkish-oud-kurschner-0-09-kso-109?variant=2985521119272&country=US&currency=USD&utm_medium=product_sync&utm_source=google&utm_content=sag_organic&utm_campaign=sag_organic&utm_term=&utm_campaign=&utm_source=adwords&utm_medium=ppc&hsa_acc=4147239623&hsa_cam=18513796241&hsa_grp=&hsa_ad=&hsa_src=x&hsa_tgt=&hsa_kw=&hsa_mt=&hsa_net=adwords&hsa_ver=3&gad_source=1&gad_campaignid=18507717987&gbraid=0AAAAACxeuv6M2Wy7zqDmix63nF_z5hkRL&gclid=CjwKCAjwup3HBhAAEiwA7euZuoy5UGYLqmS2PYmF8aIvC0F7Bk9OgY8bJXXjv8euqdjsSdJFUZi5PRoCe7AQAvD_BwE" },
  { id: "arabic-oud-strings", name: "Arabic Oud Strings", url: "https://salamuzik.com/products/strings-for-arabic-oud-kurschner-kso-112?variant=32301398196314&country=US&currency=USD&utm_medium=product_sync&utm_source=google&utm_content=sag_organic&utm_campaign=sag_organic&utm_term=&utm_campaign=&utm_source=adwords&utm_medium=ppc&hsa_acc=4147239623&hsa_cam=18513796241&hsa_grp=&hsa_ad=&hsa_src=x&hsa_tgt=&hsa_kw=&hsa_mt=&hsa_net=adwords&hsa_ver=3&gad_source=1&gad_campaignid=18507717987&gbraid=0AAAAACxeuv6M2Wy7zqDmix63nF_z5hkRL&gclid=CjwKCAjwup3HBhAAEiwA7euZus_6Wcmr91EiKstRHWF7BT1irr3n_iMSc3TVI7b_smjrtzYk-N1KbBoCg6kQAvD_BwE" },
  { id: "baglama-saz-strings", name: "Baƒülama Saz Strings", url: "https://salamuzik.com/products/saz-strings-ball-end-set-vs-404l?variant=16215929585754&country=US&currency=USD&utm_medium=product_sync&utm_source=google&utm_content=sag_organic&utm_campaign=sag_organic&utm_term=&utm_campaign=&utm_source=adwords&utm_medium=ppc&hsa_acc=4147239623&hsa_cam=18513796241&hsa_grp=&hsa_ad=&hsa_src=x&hsa_tgt=&hsa_kw=&hsa_mt=&hsa_net=adwords&hsa_ver=3&gad_source=1&gad_campaignid=18507717987&gbraid=0AAAAACxeuv6M2Wy7zqDmix63nF_z5hkRL&gclid=CjwKCAjwup3HBhAAEiwA7euZujgPApFGOupis1ILjW1uilSLDH0syW3XsQIoFp9FhSYfxCuW3UJTRhoCC7MQAvD_BwE" },
  { id: "divan-saz-strings", name: "Divan Saz Strings", url: "https://salamuzik.com/products/premium-divan-saz-strings-aur-304d-by-aurora?variant=45494245949675&country=US&currency=USD&utm_medium=product_sync&utm_source=google&utm_content=sag_organic&utm_campaign=sag_organic&utm_term=&utm_campaign=&utm_source=adwords&utm_medium=ppc&hsa_acc=4147239623&hsa_cam=18513796241&hsa_grp=&hsa_ad=&hsa_src=x&hsa_tgt=&hsa_kw=&hsa_mt=&hsa_net=adwords&hsa_ver=3&gad_source=1&gad_campaignid=18507717987&gbraid=0AAAAACxeuv6M2Wy7zqDmix63nF_z5hkRL&gclid=CjwKCAjwup3HBhAAEiwA7euZuvBw1BoKv2lkOOLOfPztvhtjP-Z71zH_JlSjqbi4dIwhplVLfkGIiRoCDsIQAvD_BwE" },
  { id: "cumbus-tanbur-strings", name: "C√ºmb√º≈ü Tanbur Strings", url: "https://salamuzik.com/products/turkish-tanbur?variant=32741591695&country=US&currency=USD&utm_medium=product_sync&utm_source=google&utm_content=sag_organic&utm_campaign=sag_organic&utm_term=&utm_campaign=&utm_source=adwords&utm_medium=ppc&hsa_acc=4147239623&hsa_cam=18513796241&hsa_grp=&hsa_ad=&hsa_src=x&hsa_tgt=&hsa_kw=&hsa_mt=&hsa_net=adwords&hsa_ver=3&gad_source=1&gad_campaignid=18507717987&gbraid=0AAAAACxeuv6M2Wy7zqDmix63nF_z5hkRL&gclid=CjwKCAjwup3HBhAAEiwA7euZuiZdTFBqz6BUPqQZVqeoVFkghHob0itZOTG25feyo7cTG-yvTNFFHRoCYxMQAvD_BwE" },
  { id: "cumbus-oud-strings", name: "C√ºmb√º≈ü Oud Strings", url: "https://salamuzik.com/products/professional-cumbus-strings-loop-end-set-vs-404c?variant=16216378900570&country=US&currency=USD&utm_medium=product_sync&utm_source=google&utm_content=sag_organic&utm_campaign=sag_organic&utm_term=&utm_campaign=&utm_source=adwords&utm_medium=ppc&hsa_acc=4147239623&hsa_cam=18513796241&hsa_grp=&hsa_ad=&hsa_src=x&hsa_tgt=&hsa_kw=&hsa_mt=&hsa_net=adwords&hsa_ver=3&gad_source=1&gad_campaignid=18507717987&gbraid=0AAAAACxeuv6M2Wy7zqDmix63nF_z5hkRL&gclid=CjwKCAjwup3HBhAAEiwA7euZujSPAHrFSepnwG3g6OPKuPTTQqtamZKr_5DZcIonQH9xf52dYF8PTBoCdPgQAvD_BwE" },
  { id: "pakistani-rabab-strings", name: "Pakistani Rabab Strings", url: "https://www.ebay.com/itm/224464640269?chn=ps&norover=1&mkevt=1&mkrid=711-117182-37290-0&mkcid=2&mkscid=101&itemid=224464640269&targetid=2295557532430&device=c&mktype=pla_with_promotion&googleloc=9008464&poi=&campaignid=21400677539&mkgroupid=173029508628&rlsatarget=aud-1412318123216:pla-2295557532430&abcId=9448483&merchantid=114611055&gad_source=1&gad_campaignid=21400677539&gbraid=0AAAAAD_QDh89hRCGA2leS9okqOnX-ubKv&gclid=CjwKCAjwup3HBhAAEiwA7euZupSPDx-zirhgXQ7_JGCwZtcNfmDibHrunhNFw562wsFumOpEd080TBoCnLEQAvD_BwE" },
  { id: "duduk-reed", name: "Armenian Duduk Reeds - In the options, choose key of F, or A !", url: "https://dudukmaster.com/product/reed-medium/" },
  { id: "chinese-pipa-strings", name: "Chinese Pipa Strings", url: "https://nsmusical.com/products/dunhuang-pipa-strings-nylon-wound-steel-strings-1st-4th-professional-strings-for-traditional-chinese-pipa?variant=42265725501463&country=US&currency=USD&utm_medium=product_sync&utm_source=google&utm_content=sag_organic&utm_campaign=sag_organic&gad_source=1&gad_campaignid=22485791209&gbraid=0AAAAA-2p0gP5xiYYldP4EHUZGnB8ehqvI&gclid=CjwKCAjwup3HBhAAEiwA7euZup1G5-4dZzlyNv-BOt7Gx5u17IuVHBINmSDzXSU8AWuGPBA8x_uqSxoCd94QAvD_BwE" },
  { id: "erhu-strings", name: "Chinese Violin Strings", url: "https://www.amazon.com/DAddario-ERHU01-Strings-Medium-Tension/dp/B06X9XMV6V/ref=sr_1_1?crid=MFX5XSN8YTPS&dib=eyJ2IjoiMSJ9.p9y79jYmfmpz52iBR3dLjiU13n1EA4w7EM8PuxbYoggCjCrM4NAmvoXq_zQslhdY0zM5AF6yNU8rhnPwDaJsvux0JvLERDjZeaf4ydPuHFkyk9KBIQjfyWT1hkF-YUimCDoldXV4KgBuD7lwEkwFgU3aKWjjiu-GkvjlaADC0Uk75qkRkSjM7vYsFMQgBtI9Q_tA3gK7d5xsoPqbmpNwgfh8nGo3Y4kTHxcwCYLiKi-vV10mO8rwjM6HUkUlqaU5FFDZ5y8-L3vF8MP1L5CnLQ3uHaHsDnwIiGx-E27mk9I.o0SLW0wtj0rGSwQUdtbKy79rhxZYYuHUqOH618oWGk0&dib_tag=se&keywords=buy+erhu+strings&qid=1760066725&sprefix=b%2Caps%2C168&sr=8-1" },
  { id: "kabak-kemane-strings", name: "Kabak Kemane Strings", url: "https://www.ethnicmusical.com/shop/premium-turkish-kabak-kemane-strings-set-by-cast/?srsltid=AfmBOoo89VpSFp1Thxdz2KQ-j2ZjaxYAFRG_3Nsoh3uMcUNO_c1yzQg_" },
  { id: "cello-strings", name: "Cello Strings", url: "https://www.amazon.com/DAddario-H510-Helicore-Stranded-Playability/dp/B000EENKMC/ref=sr_1_1_sspa?crid=LV48B1RG8PRJ&dib=eyJ2IjoiMSJ9.bQ2mVJNjYd8bCnk9lF9jQHlEmdrQfr4Igni1UY_HjbIHhS3fioL88TSzBujq1zlM6go0SrCclVvQIe53JN0nCs4A-243xvowcZXeRpiYLvVAtWJ5uQjNV27s2oF5mfAtcBaqqpu2bLQhseR9_awydLi2cDoBGq2NZgII_BGbsGFyemTTcagQcnzceQsxaZLsJcs6Ic89AVRJj2pfrbfYdmGEr7b8Ys09nGLe0FZGPQUbLD0D3t91y2q0wN8Sa7mHN_Cv53_b-gYlal5VLV2xBYgU_4lUYJ6z8Oeomn70LAY.IOTUUhd06S4w5VL5OuzsWkmyiabaJ7S5mJ-ZIfZkw_o&dib_tag=se&keywords=cello%2Bstrings%2Bhelicore&qid=1760066872&s=musical-instruments&sprefix=cello%2Bstrings%2Bhellicore%2Cmi%2C93&sr=1-1-spons&sp_csd=d2lkZ2V0TmFtZT1zcF9hdGY&th=1" },
  { id: "electric-guitar-strings", name: "Electric Guitar Strings", url: "https://www.amazon.com/Elixir-Strings-Electric-NANOWEB-010-046/dp/B01KAQMA4C/ref=sr_1_7?crid=7S6AY9YUGS4Q&dib=eyJ2IjoiMSJ9.IHVz_WiNVL0ySTKUyBqk9UMasW2p-S7VFQ1XGwm62psa7Y_YJhtVTTTztKb8z717Xj6VJZS4t_AhkAdeUEdZGlkM2A0kGqqcXRYxHhDTXYUnAtAXQDVZPwDlKULVO9lT0sYTYXWIAKoWt-P8r0U4AxeuRWbMIVaAPDapprUrT_LU3e6DCU3Wy0qaSAXWxozIrTIdZ0z4qwkcfkaekPSZ9MXsyBqD4JzXHx2fBSd6zqK3lHUukN9zXcwVuotHlZu0KXp8Bw1bdn7wPFHJQ3OKDWDcRnMq6QEBJl3xCOJ_Mz4.wXc3rcFIbpIwDFGFtXjB778hZSHYV6rXJ7jNYWBp7x4&dib_tag=se&keywords=buy%2B6%2Bstring%2Belectric%2Bguitar%2Bstrings&qid=1760066909&s=musical-instruments&sprefix=buy%2B6%2Bstring%2Belectric%2Bguitar%2Bstring%2Cmi%2C81&sr=1-7&th=1" },
  { id: "lap-steel-strings", name: "Lap Steel Strings", url: "https://www.amazon.com/Electric-Steel-Strings-Tuning-15-36/dp/B00AHL2X98/ref=sr_1_3?crid=29BUZJIQEQM2J&dib=eyJ2IjoiMSJ9.rFu1p9BcdSKsWdEuvuv4RxCmaCAo5QxtUDF8xz1TeaLVQrk3mRTkyHZ_sZ6j1SdCrarSBQ9XMh2WCmUqNtGWUoioaZtSACgAuTcslgQ6xKs01WD_cQu7Pxd_VExeHt3mRCqc3crjlRrW5U6ceW8qm4OXDAp1hC3off-RXSfKXutKZGv0_yKj0xPyua0ye4BPlQoegolPBiGn4D24QzTyWCzN1SUhPA2TKc48T1lRvxlY9Y9fOy59kT1x2iIead6TfOB6KRSfzK51RnQ-4I1eqRoym6X8UBnahz5qNw4oW-I.3LIrMh67_O8lvn8t6SMiqFOMMPMBAW_73mip_Y6VH1M&dib_tag=se&keywords=lap+steel+strings+c6&qid=1760067007&s=musical-instruments&sprefix=lap+steel+strings+c6%2Cmi%2C85&sr=1-3" },
  { id: "5-string-banjo-strings", name: "5-String Banjo Strings", url: "https://www.amazon.com/DAddario-EJ55-Phosphor-5-String-Strings/dp/B00RWCUF40/ref=sr_1_4?crid=2Z7CTZB770CVV&dib=eyJ2IjoiMSJ9.cagikoKV-uh6vBSIfP1OgFSI5wYCKrId5pOUx4XQ46HA-30DTnbpYspCpEWBRBTTevFnVU1Od99H9EcvCnmYPaXCct3riC85fv-rZGT13wlbnPkdixpjnmTojoH3242EzfJRhTXQb1FL2-LTZO3aerc5EQmSJq0AVA4FACWtlkDDYESKre70BEB_18izPs9NFUZKLxDrEP32H913HFuWLKRsOg-eJCe-PkmGNgu3m0RRdGx6KpoKfsY9nnBP_x0wpGS8J1RZ7zXXin2GAWAP_2LoT_xLhn4iS0zEO86jBuY.T3FkJMiPbyRaPXlZ29yiMSfsySWL-D7j6DUkNhsLkpk&dib_tag=se&keywords=5-string%2Bbanjo%2Bstrings%2Bmedium&qid=1760067154&s=musical-instruments&sprefix=5-string%2Bbanjo%2Bstrings%2Bmedium%2Cmi%2C110&sr=1-4&th=1" },
  { id: "tanpura-strings", name: "Tanpura Strings", url: "https://www.musiciansmallusa.com/tanpura-string-set/?srsltid=AfmBOor1M5FKgfjVWwMYJYQ1rRP_bBrylQcvVIr7Z1t3X-cnV6WOpi7f" },
  { id: "zurna-reeds", name: "Zurna Reeds", url: "https://salamuzik.com/products/professional-pipe-reed-for-turkish-zurna-azb-404?variant=32741476623&country=US&currency=USD&utm_medium=product_sync&utm_source=google&utm_content=sag_organic&utm_campaign=sag_organic&utm_term=&utm_campaign=&utm_source=adwords&utm_medium=ppc&hsa_acc=4147239623&hsa_cam=18513796241&hsa_grp=&hsa_ad=&hsa_src=x&hsa_tgt=&hsa_kw=&hsa_mt=&hsa_net=adwords&hsa_ver=3&gad_source=1&gad_campaignid=18507717987&gbraid=0AAAAACxeuv6M2Wy7zqDmix63nF_z5hkRL&gclid=CjwKCAjwup3HBhAAEiwA7euZutsyHeyJkVyqDuKKRBOUZrtPezwqkte9YIYD0-dWogMtdyRMm1YXfhoC9EkQAvD_BwE" },
  { id: "cura-saz-strings", name: "Cura Saz Strings", url: "https://salamuzik.com/collections/baglama-saz-accessories/products/strings-for-turkish-cura-saz" },

];
---

<BaseLayout title="My Wish List ‚Äî Tradscendence" description="Hunter‚Äôs wish list ‚Äî items supporters can buy.">
  <section class="mx-auto max-w-3xl px-4 py-10 space-y-8">
    <header class="space-y-3 text-center">
      <h1 class="font-display text-3xl md:text-4xl">My Wish List</h1>
      <p class="opacity-80 max-w-xl mx-auto">
        <p>Welcome to the secret page on my website.</p>
        <p>The best gift I can possibly get are accessories and strings!</p><br/>
        Simply click the link under the list item where you can purchase it!  **Important : After you have purchased, if you can please check the big box so that I can get a notification that the item was purchased.**  I will never know who purchased it, only that the box was checked by somebody.  This way I can keep track, and remove items from the list as needed, and so that too many friends/family don't purchase the same item, which has happened before!  Thank you so much for your support!
      </p>
    </header>

    <ul id="wish-list" data-endpoint={FORMSPREE_ENDPOINT} class="space-y-6">
      {WISHLIST.map((item, idx) => (
        <li
          class="frame rounded-xl border border-[var(--accent-bronze)]/70 p-5 flex flex-col gap-5"
          data-item-id={item.id}
          data-item-name={item.name}
          data-item-url={item.url}
          data-item-number={(idx + 1).toString()}
        >
          <div class="flex items-start gap-3">
            <span class="inline-flex h-7 w-7 items-center justify-center rounded-full border border-[var(--accent-bronze)] text-xs mt-1">
              {idx + 1}
            </span>
            <div>
              <h2 class="item-title font-semibold text-lg mb-2">{item.name}</h2>
              <a
                href={item.url}
                target="_blank"
                rel="noopener"
                class="inline-block px-4 py-2 rounded-lg border border-[var(--accent-gold)] text-[var(--accent-gold)] text-base font-semibold tracking-wide hover:bg-[var(--accent-gold)] hover:text-ebony transition"
              >
                üõí Click here to purchase
              </a>
            </div>
          </div>

          <div class="flex items-center gap-4 pl-10 sm:pl-12">
  <input
    type="checkbox"
    class="appearance-none relative h-9 w-9 shrink-0 border-2 border-[var(--accent-bronze)] rounded-md cursor-pointer
           transition-colors duration-200 ease-in-out
           checked:bg-[var(--accent-gold)] checked:border-[var(--accent-gold)]
           before:content-[''] before:absolute before:inset-0 before:flex before:items-center before:justify-center
           before:scale-0 checked:before:scale-100
           before:text-ebony before:font-bold before:text-lg
           before:content-['‚úî']"
    data-checkbox
    aria-label={`Notify purchase of ${item.name}`}
  />
  <span class="text-base font-medium text-ivory opacity-80 leading-tight">
    ‚úÖ Please check the box to the left once you‚Äôve purchased this item
  </span>
</div>

        </li>
      ))}
    </ul>

    <!-- No-JS fallback -->
    <noscript>
      <div class="mt-8 p-4 border rounded-xl border-[var(--accent-bronze)]/70">
        <p class="text-sm mb-2">JavaScript is off. Use this fallback to notify me:</p>
        <form action={FORMSPREE_ENDPOINT} method="POST" class="grid gap-2">
          <label class="text-sm">
            Which item?
            <select name="item_number" class="bg-ebony/60 frame rounded-xl px-3 py-2 border border-[var(--accent-bronze)]">
              {WISHLIST.map((item, idx) => (
                <option value={idx + 1}>{idx + 1} ‚Äî {item.name}</option>
              ))}
            </select>
          </label>
          <input type="hidden" name="_subject" value="Wishlist (noscript) submission" />
          <input type="hidden" name="form_name" value="wishlist-click-noscript" />
          <input type="text" name="_gotcha" class="hidden" tabindex="-1" autocomplete="off" />
          <button class="px-3 py-2 rounded-xl border border-[var(--accent-bronze)] hover:bg-white/5" type="submit">
            Send notification
          </button>
        </form>
      </div>
    </noscript>
  </section>

  <script>
    (function () {
      const list = document.getElementById("wish-list");
      if (!list) return;

      const ENDPOINT = list.dataset.endpoint;
      if (!ENDPOINT) {
        console.error("Formspree endpoint missing. Set FORMSPREE_ENDPOINT in the page.");
        return;
      }

      async function notifyFormspree(payload) {
        const res = await fetch(ENDPOINT, {
          method: "POST",
          headers: { "Content-Type": "application/json", "Accept": "application/json" },
          body: JSON.stringify(payload),
        });
        if (!res.ok) {
          const text = await res.text().catch(() => "");
          throw new Error(`Formspree ${res.status}: ${text || "request failed"}`);
        }
        return res.json().catch(() => ({}));
      }

      [...list.querySelectorAll("li[data-item-id]")].forEach((li) => {
        const cb = li.querySelector("[data-checkbox]");
        if (!cb) return;

        cb.addEventListener("click", async (e) => {
          e.preventDefault(); // treat checkbox as button

          const item = {
            id: li.getAttribute("data-item-id"),
            name: li.getAttribute("data-item-name"),
            url: li.getAttribute("data-item-url"),
            number: li.getAttribute("data-item-number"),
          };

          cb.disabled = true;

          const payload = {
            _subject: `Wishlist: Item #${item.number} ‚Äî ${item.name}`,
            form_name: "wishlist-click",
            item_number: item.number,
            item_id: item.id,
            item_name: item.name,
            item_url: item.url,
            page_path: location.pathname,
            page_title: document.title,
            tz: Intl.DateTimeFormat().resolvedOptions().timeZone || "unknown",
            when_iso: new Date().toISOString(),
            ua: navigator.userAgent,
            _gotcha: "",
          };

          try {
            await notifyFormspree(payload);
            li.classList.add("opacity-60");
            cb.nextElementSibling.textContent = "üéâ Thank you! This item‚Äôs been marked purchased.";
            cb.nextElementSibling.classList.add("text-[var(--accent-gold)]");
          } catch (err) {
            console.error(err);
            cb.nextElementSibling.textContent = "‚ùå Couldn‚Äôt send ‚Äî please try again.";
            cb.nextElementSibling.classList.add("text-red-400");
          } finally {
            cb.disabled = false;
          }
        });
      });
    })();
  </script>
</BaseLayout>
