# BUG-001 — Admin Add Instrument Endpoint Returns 404 (Wrong HTTP Method)

**Reporter:** Hunter Eastland  
**Date Found:** February 17, 2026  
**Environment:** Local (`http://localhost:4321`) + Production (`https://www.soundbeyondborders.com`)  
**Severity:** High  
**Priority:** High  
**Status:** Resolved  
**Jira Ticket:** SCRUM-7  

---

## Summary

The "Admin Panel Add Instrument" Postman request was configured as a `PUT` request but the API endpoint only accepts `POST`. This caused all add instrument requests to return `404 Not Found` instead of `201 Created`.

---

## Steps to Reproduce

1. Open Postman and navigate to **Instruments API → Admin Panel Add Instrument Page**
2. Confirm the request method is set to `PUT`
3. Set the `x-admin-key` header to the correct admin API key
4. Send the request to `{{base_url}}/api/instruments/index.json` with a valid instrument JSON body
5. Observe the response

---

## Expected Behavior

Request returns `201 Created` with response body:
```json
{
  "success": true,
  "id": 18
}
```

---

## Actual Behavior

Request returns `404 Not Found` with an HTML error page response instead of JSON.

---

## Root Cause

The Postman request was configured with the wrong HTTP method (`PUT` instead of `POST`). The API route in `src/pages/api/instruments/index.json.ts` only exports a `POST` handler — there is no `PUT` handler on this endpoint.

Additionally, the Authorization header key was set to `ADMIN_API_KEY` instead of the correct header name `x-admin-key` as defined in the API source code.

Two issues combined:
1. Wrong HTTP method: `PUT` → should be `POST`
2. Wrong auth header name: `ADMIN_API_KEY` → should be `x-admin-key`

---

## Fix Applied

1. Changed request method in Postman from `PUT` to `POST`
2. Updated Authorization header key from `ADMIN_API_KEY` to `x-admin-key`

---

## How to Verify Fix

1. Open Postman and navigate to **Instruments API → Admin Panel Add Instrument Page**
2. Confirm method is now `POST`
3. Confirm Authorization header key is `x-admin-key`
4. Send the request with a valid instrument body containing at minimum `slug` and `name`
5. Confirm response is `201 Created` with `{ "success": true, "id": [number] }`
6. Run the full Instruments API collection and confirm 14/14 tests pass

---

## Notes

- This was a test configuration issue, not a bug in the application code itself
- The API source code was correct — the mismatch was in how the Postman request was originally set up
- Lesson learned: always verify HTTP method and auth header names against the actual `.ts` source file before writing tests